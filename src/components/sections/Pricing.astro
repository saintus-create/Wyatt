---
/**
 * Pricing Section Component
 *
 * Displays pricing tiers in a responsive grid layout with features and CTA buttons.
 * Supports highlighting one tier (e.g., "Popular" or "Recommended").
 *
 * @example
 * ```astro
 * <Pricing
 *   title="Simple Pricing"
 *   subtitle="Choose the plan that's right for you"
 *   tiers={[
 *     {
 *       name: "Free",
 *       price: "$0",
 *       description: "For hobby projects",
 *       features: ["5 projects", "Basic support"],
 *       cta: { href: "/signup", label: "Get Started" }
 *     },
 *     {
 *       name: "Pro",
 *       price: "$29",
 *       description: "For professionals",
 *       features: ["Unlimited projects", "Priority support"],
 *       cta: { href: "/signup", label: "Subscribe" },
 *       highlighted: true
 *     }
 *   ]}
 * />
 * ```
 *
 * @customization
 * - Change tier layout by modifying grid-cols (line 34)
 * - Adjust card spacing and padding
 * - Customize highlighted tier border/background (line 40)
 */
interface PricingTier {
  name: string;
  price: string;
  description: string;
  features: string[];
  cta: { href: string; label: string };
  highlighted?: boolean;
}

interface Props {
  title: string;
  subtitle?: string;
  tiers: PricingTier[];
}

const { title, subtitle, tiers } = Astro.props;
---

<section class="py-24">
  <div class="container max-w-5xl mx-auto">
    <div class="flex flex-col items-center space-y-4 text-center">
      <h2 class="text-3xl font-bold leading-[1.1] sm:text-3xl md:text-5xl">
        {title}
      </h2>
      {subtitle && (
        <p class="max-w-[85%] leading-normal text-muted-foreground sm:text-lg sm:leading-7">
          {subtitle}
        </p>
      )}
    </div>
    <div class="grid gap-6 mt-12 lg:grid-cols-3">
    {tiers.map((tier) => (
      <div
        class:list={[
          "flex flex-col rounded-lg border bg-card p-6",
          tier.highlighted && "border-primary shadow-2xl shadow-primary/20 scale-105",
        ]}
      >
        <div class="mb-4">
          <h3 class="text-xl font-bold">{tier.name}</h3>
          <p class="text-sm text-muted-foreground mt-1">{tier.description}</p>
        </div>
        <div class="mb-6">
          <span class="text-4xl font-bold">{tier.price}</span>
          {tier.price !== "Custom" && <span class="text-muted-foreground">/month</span>}
        </div>
        <ul class="mb-6 flex-1 space-y-2">
          {tier.features.map((feature) => (
            <li class="flex items-center gap-2">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="h-4 w-4 text-primary"
              >
                <polyline points="20 6 9 17 4 12" />
              </svg>
              <span class="text-sm">{feature}</span>
            </li>
          ))}
        </ul>
        <a
          href={tier.cta.href}
          class:list={[
            "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 h-10 px-4 py-2 w-full",
            tier.highlighted
              ? "bg-primary text-primary-foreground hover:bg-primary/90"
              : "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
          ]}
        >
          {tier.cta.label}
        </a>
      </div>
    ))}
    </div>
  </div>
</section>
